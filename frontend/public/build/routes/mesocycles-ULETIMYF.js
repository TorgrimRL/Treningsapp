import{a as f,d as g}from"/build/_shared/chunk-T4TVODSB.js";import"/build/_shared/chunk-VQOUZTVV.js";import{d as n,f as p,g as i}from"/build/_shared/chunk-DLUJ32DX.js";var S=n(p(),1);var r=n(p(),1);var t=n(i(),1),k=()=>{let[m,v]=(0,r.useState)([]),[b,u]=(0,r.useState)({}),[y,w]=(0,r.useState)([]),o=(0,r.useRef)(null),D=process.env.REACT_APP_API_URL,N=e=>{let a=e.filter(s=>s.isCurrent),c=e.filter(s=>!s.isCurrent&&s.completedDate===null),l=e.filter(s=>s.completedDate!==null);return a.concat(c,l)};(0,r.useEffect)(()=>{let e=N(m);w(e)},[m]),(0,r.useEffect)(()=>{let e=a=>{o.current&&!o.current.contains(a.target)&&u({})};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[o]),(0,r.useEffect)(()=>{(async()=>{try{let l=(await(await fetch(`${D}/api/mesocycles`,{method:"GET",credentials:"include"})).json()).map(E);v(l)}catch(a){console.error("Error fetching mesocycles:",a)}})()},[]);let E=e=>(e.plan.every(c=>c.exercises.every(l=>l.completed))&&!e.completedDate&&(e.completedDate=new Date().toISOString()),e),C=e=>{u(a=>({...a,[e]:!a[e]}))};return(0,t.jsxs)("div",{className:" mx-auto p-5 text-white bg-darkGray",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center mb-5",children:[(0,t.jsx)("h1",{className:"text-2xl m-0",children:"Mesocycles"}),(0,t.jsx)("a",{href:"mesocycles-new",className:"bg-red-600 text-white border-none py-2 px-4 cursor-pointer text-lg rounded",children:"+ NEW"})]}),(0,t.jsx)("ul",{className:"list-none p-0 m-0",children:y.map(e=>(0,t.jsxs)("li",{className:`flex justify-between items-center max-w-sm bg-darkestGray p-4 rounded mb-2 ${e.isCurrent?"border-l-4 border-red-600":""}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg m-0 max-w-sm mb-1 truncate max-w-[200px]",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 m-0",children:[e.weeks," WEEKS - ",e.daysPerWeek," DAYS/WEEK"]}),e.completedDate&&(0,t.jsxs)("p",{className:"text-sm text-gray-400 m-0",children:["Completed:"," ",new Date(e.completedDate).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:`py-1 px-2 rounded text-sm mr-2 ${e.isCurrent?"bg-orange-600":e.completedDate?"bg-green-600":"bg-gray-600"}`,children:e.isCurrent?"CURRENT":e.completedDate?new Date(e.completedDate).toLocaleDateString():"NOT COMPLETED"}),(0,t.jsx)("div",{className:"relative",ref:o,children:(0,t.jsx)("button",{onClick:()=>C(e.id),className:"text-white focus:outline-none py-2",children:(0,t.jsx)(f,{icon:g})})}),b[e.id]&&(0,t.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",ref:o,children:(0,t.jsxs)("ul",{className:"py-1",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",children:"Edit"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",children:"Delete"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",className:"block px-4 py-2 text-gray-800 hover:bg-gray-200",children:"View Details"})})]})})]})]},e.id))})]})},x=k;var d=n(i(),1);function h(){return(0,d.jsx)("div",{style:{paddingTop:"30px"},children:(0,d.jsx)(x,{})})}export{h as default};
